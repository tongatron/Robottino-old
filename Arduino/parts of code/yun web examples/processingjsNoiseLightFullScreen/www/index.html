<!DOCTYPE html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<title>PROCESSING.JS + YUN</title>
		<link rel="icon"  type="image/x-icon" href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAQAAVzABAEAjBQAaDwYAWjUGAGE6CQBrQQ0ATS8PAFhAJwBUQC8AbFI6AHVXPACBZk4A4NrWAPb19QAAAAAAAMmZmZmZmgAJIwAAAAAAcMIjPjA+PjAKpxIuMDMzMAm0Ii4zMzMACaIiLt3dMAAJtyIuIzPQAAm0Un5yM+IzKLRkfncy4iIotRF+dyLkIiq0QX53F+EiGrQUTkd34iIatEVu7u5iIVrBVVRBRFRVbAtGZGZla2uwAMu7u7u8vADAAwAAgAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIABAADAAwAA" />
		<meta name="Generator" content="Processing" />
		
		<script src="js/processing.js" type="text/javascript"></script>
		<script src="js/zepto.min.js"></script>		

		<link rel="stylesheet" type="text/css" href="style.css">


		<script type="text/javascript">
			// convenience function to get the id attribute of generated sketch html element
			function getProcessingSketchId () { return 'noisy'; }
		</script>

	</head>
	<body>
		<div id="content">
			<div>
				<canvas id="noisy" data-processing-sources="noisy.txt">
					<p>No Canvas Dude</p>					
				</canvas>
				<noscript>
					<p>No JS Dude</p>
				</noscript>
	    	</div>	
	    	<div id="container">
	    	<div id="arduino"></div>		    								
	    	</div>
		</div>

		<script type="text/javascript">

			function setRadius(radius) {
				var sketch = Processing.getInstanceById('noisy');
				sketch.setRadius(radius);
			}

			function refresh() {

			  	$.get('/arduino/light/', function(json_response){
			  				var value = json_response.sensorValue;				  			
				  			setRadius(value);
				  		}
				  	);			  	
	  		}	

			window.setInterval(refresh, 1000);
			
		</script>
	</body>
</html>
